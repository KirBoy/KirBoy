(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return o}));var r=n(50),a=r.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"4d47dbe3-03df-4e80-9e46-3df12b2a85e4"}}),s=function(e,t){return a.get("/users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},c={getAuth:function(){return a.get("/auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("/auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return a.delete("/auth/login").then((function(e){return e.data}))}},i=function(e,t){return e?a.delete("/follow/"+t).then((function(e){return e.data})):a.post("/follow/"+t).then((function(e){return e.data}))},u=function(e){return a.get("/profile/"+e)},o={getProfile:function(e){return a.get("/profile/"+e)},getStatus:function(e){return a.get("/profile/status/"+e)},updateStatus:function(e){return a.put("/profile/status",{status:e})}}},16:function(e,t,n){e.exports={dialogs__inner:"Dialogs_dialogs__inner__1AcUW",dialog:"Dialogs_dialog__17jms",answer:"Dialogs_answer__3g6a8"}},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return O}));var r=n(15),a=n(3),s=n(12),c="ADD_POST",i="SET_USER_PROFILE",u="SET_IS_LOADING",o="SET_STATUS",l={post:[{id:1,post:"Hello guys!"},{id:2,post:"My first post"}],profile:null,isLoading:!1,status:""},d=function(e){return{type:c,text:e}},j=function(e){return{type:u,isLoading:e}},p=function(e){return{type:o,status:e}},b=function(e){return function(t){t(j(!0)),Object(s.c)(e).then((function(e){var n;t(j(!1)),t((n=e.data,{type:i,profile:n}))}))}},f=function(e){return function(t){s.e.getStatus(e).then((function(e){t(p(e.data))}))}},O=function(e){return function(t){s.e.updateStatus(e).then((function(n){0===n.data.resultCode&&t(p(e))}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;if(t.type==c&&""==t.text)return e;switch(t.type){case c:var n={id:3,post:t.text};return Object(a.a)(Object(a.a)({},e),{},{post:[].concat(Object(r.a)(e.post),[n])});case i:return Object(a.a)(Object(a.a)({},e),{},{profile:t.profile});case u:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{isLoading:t.isLoading});case o:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{status:t.status});default:return e}}},34:function(e,t,n){"use strict";var r=n.p+"static/media/1493.65c3f468.gif",a=(n(0),n(1));t.a=function(){return Object(a.jsx)("img",{src:r})}},37:function(e,t,n){e.exports={error:"Login_error__17rzo"}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(3),a=n(18),s=n(19),c=n(21),i=n(20),u=n(0),o=n.n(u),l=n(5),d=n(11),j=n(1),p=function(e){return{isAuth:e.auth.isAuth}},b=function(e){var t=function(t){Object(c.a)(u,t);var n=Object(i.a)(u);function u(){return Object(a.a)(this,u),n.apply(this,arguments)}return Object(s.a)(u,[{key:"render",value:function(){return this.props.isAuth?Object(j.jsx)(e,Object(r.a)({},this.props)):Object(j.jsx)(l.a,{to:"/login"})}}]),u}(o.a.Component);return Object(d.b)(p)(t)}},4:function(e,t,n){e.exports={wrapper__aside:"Aside_wrapper__aside__iPW8P",wrapper__content:"Aside_wrapper__content__2jMJp",a:"Aside_a__2tTTW",b:"Aside_b__F2PPk",wrapper__item:"Aside_wrapper__item__2jDlY",wrapper__title:"Aside_wrapper__title__2nF38","wrapper__friends-list":"Aside_wrapper__friends-list__2ROuN","wrapper__friend-link":"Aside_wrapper__friend-link__1v8F4",wrapper__friend:"Aside_wrapper__friend__EAraD",wrapperLink:"Aside_wrapperLink__3HoTg",active:"Aside_active__3lqBw",loginBlock:"Aside_loginBlock__LzcOO"}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e?void 0:"Required"}},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return _}));var r=n(15),a=n(3),s=n(12),c="FOLLOW",i="UNFOLLOW",u="SET_USERS",o="SET_NEW_PAGE",l="SET_TOTAL_USERS_COUNT",d="SET_IS_LOADING",j="SET_STATUS_BTN",p={users:[],pageSize:10,currentPage:1,totalUsersCount:0,isLoading:!0,disabledBtn:[],fake:10},b=function(e){return{type:c,userId:e}},f=function(e){return{type:i,userId:e}},O=function(e){return{type:d,isLoading:e}},h=function(e,t){return{type:j,status:e,userId:t}},g=function(e,t){return function(n){n(O(!0)),n({type:o,page:e}),Object(s.d)(e,t).then((function(e){var t,r;n((t=e.items,{type:u,users:t})),n((r=e.totalCount,{type:l,count:r})),n(O(!1))}))}},_=function(e,t){return function(n){switch(e){case!0:n(h(!0,t)),Object(s.b)(!0,t).then((function(e){0===e.resultCode&&(n(f(t)),n(h(!1,t)))}));case!1:n(h(!0,t)),Object(s.b)(!1,t).then((function(e){0===e.resultCode&&(n(b(t)),n(h(!1,t)))}))}}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FAKE":return Object(a.a)(Object(a.a)({},e),{},{fake:e.fake+1});case c:return Object(a.a)(Object(a.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(a.a)(Object(a.a)({},e),{},{followed:!0}):e}))});case i:return Object(a.a)(Object(a.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?(console.log(e),Object(a.a)(Object(a.a)({},e),{},{followed:!1})):e}))});case u:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{users:Object(r.a)(t.users)});case o:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{currentPage:t.page});case l:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{totalUsersCount:t.count});case d:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{isLoading:t.isLoading});case j:return console.log(t),Object(a.a)(Object(a.a)({},e),{},{disabledBtn:t.status?[].concat(Object(r.a)(e.disabledBtn),[t.userId]):[e.disabledBtn.filter((function(e){return e!==t.userId}))]});default:return e}}},56:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var r=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,86)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},a=n(28),s=n.n(a),c=n(18),i=n(19),u=n(21),o=n(20),l=(n(56),n(4)),d=n.n(l),j=n(10),p=n(1),b=function(){return Object(p.jsxs)("aside",{className:d.a.wrapper__aside,children:[Object(p.jsxs)("ul",{className:"wrapper__list",children:[Object(p.jsx)("li",{className:d.a.wrapper__item,children:Object(p.jsx)(j.b,{className:d.a.wrapperLink,activeClassName:d.a.active,to:"/profile",children:"Profile"})}),Object(p.jsx)("li",{className:d.a.wrapper__item,children:Object(p.jsx)(j.b,{className:d.a.wrapperLink,activeClassName:d.a.active,to:"/dialogs",children:"Messages"})}),Object(p.jsx)("li",{className:d.a.wrapper__item,children:Object(p.jsx)(j.b,{className:d.a.wrapperLink,activeClassName:d.a.active,to:"/users",children:"Users"})}),Object(p.jsx)("li",{className:d.a.wrapper__item,children:Object(p.jsx)("a",{className:"wrapper__link",children:"News"})}),Object(p.jsx)("li",{className:d.a.wrapper__item,children:Object(p.jsx)("a",{className:"wrapper__link",children:"Music"})}),Object(p.jsx)("li",{className:d.a.wrapper__item,children:Object(p.jsx)("a",{className:"wrapper__link",children:"Settings"})})]}),Object(p.jsxs)("div",{className:d.a.wrapper__friends,children:[Object(p.jsx)("h2",{className:"wrapper__title",children:"Friends"}),Object(p.jsxs)("ul",{className:d.a["a-123_123123-sdsfdf134"],children:[Object(p.jsx)("li",{className:"wrapper__friend",children:Object(p.jsxs)("a",{className:"".concat(d.a.a," ").concat(d.a.b),children:[Object(p.jsx)("img",{className:"wrapper__ava"}),Object(p.jsx)("span",{className:"wrapper__friend-name",children:"Andrew"})]})}),Object(p.jsx)("li",{className:"wrapper__friend",children:Object(p.jsxs)("a",{className:d.a["wrapper__friend-link"],children:[Object(p.jsx)("img",{className:"wrapper__ava"}),Object(p.jsx)("span",{className:"wrapper__friend-name",children:"Sasha"})]})}),Object(p.jsx)("li",{className:"wrapper__friend",children:Object(p.jsxs)("a",{className:d.a["wrapper__friend-link"],children:[Object(p.jsx)("img",{className:"wrapper__ava"}),Object(p.jsx)("span",{className:"wrapper__friend-name",children:"Sveta"})]})})]})]})]})},f=n(5),O=n(0),h=n.n(O),g=n(15),_=n(3),m={dialogs:[{id:1,name:"Sava"},{id:2,name:"Sveta"},{id:3,name:"Masha"},{id:4,name:"Dasha"},{id:5,name:"Kirill"},{id:6,name:"Tamara"}],messages:{message:[{id:1,message:"Hello my friend"},{id:2,message:"My name is Sasha'"},{id:3,message:"Nice to meet you"}],messageText:""}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;if("ADD-MESSAGE"===t.type&&""!==t.text){var n={id:4,message:t.text};return Object(_.a)(Object(_.a)({},e),{},{messages:{message:[].concat(Object(g.a)(e.messages.message),[n]),messageText:""}})}return"ON-MESSAGE-CHANGE"===t.type?Object(_.a)(Object(_.a)({},e),{},{messages:{message:e.messages.message,messageText:t.text}}):e},v=n(16),w=n.n(v),N=function(e){return Object(p.jsx)("li",{className:w.a.dialog,children:Object(p.jsx)(j.b,{to:"/dialogs/"+e.id,children:e.name})})},A=function(e){return Object(p.jsx)("li",{className:w.a.dialog,children:Object(p.jsx)("p",{className:w.a.answer,children:e.text})})},S=function(e){var t=h.a.createRef(),n=e.dialogsPage.messages.message.map((function(e){return Object(p.jsx)(A,{text:e.message})})),r=e.dialogsPage.dialogs.map((function(e){return Object(p.jsx)(N,{name:e.name,id:e.id})}));return Object(p.jsxs)("div",{className:w.a.dialogs__inner,children:[Object(p.jsx)("ul",{className:w.a.dialogs,children:r}),Object(p.jsxs)("div",{children:[Object(p.jsx)("ul",{className:w.a.answers,children:n}),Object(p.jsx)("textarea",{ref:t,value:e.dialogsPage.messages.messageText,onChange:function(){var n=t.current.value;e.changeMessageText(n)}}),Object(p.jsx)("button",{onClick:function(){var n=t.current.value;e.addMessage(n)},children:"Send"})]})]})},y=n(11),L=n(38),k=Object(L.a)(S),E=Object(y.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{addMessage:function(t){e(function(e){return{type:"ADD-MESSAGE",text:e}}(t))},changeMessageText:function(t){e(function(e){return{type:"ON-MESSAGE-CHANGE",text:e}}(t))}}}))(k),T=function(e){return e.isAuth?Object(p.jsxs)("header",{className:"wrapper__header",children:[Object(p.jsx)("a",{className:"logo",href:"#",children:Object(p.jsx)("img",{})}),Object(p.jsxs)("div",{className:d.a.loginBlock,children:[e.login,Object(p.jsx)("button",{onClick:e.getLogoutUser,children:"Logout"})]})]}):Object(p.jsx)(f.a,{to:"/login"})},C=n(27),P=n(17),U=n.n(P),I=n(30),M=n(12),D=n(31),F=n(14),z="SET_USER_DATA",B={userId:null,login:null,email:null,isAuth:!1},R=function(e,t,n,r){return{type:z,payload:{userId:e,email:t,login:n,isAuth:r}}},G=function(){return function(){var e=Object(I.a)(U.a.mark((function e(t){var n,r,a,s,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.getAuth();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,s=r.email,c=r.login,t(R(a,s,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(){return function(){var e=Object(I.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.logout();case 2:0===e.sent.resultCode&&(t(G()),t(R(null,null,null,!1)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(_.a)(Object(_.a)({},e),t.payload);default:return e}},q=n(23),J=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(p.jsx)(T,Object(_.a)(Object(_.a)({},this.props),{},{getLogoutUser:this.props.getLogoutUser}))}}]),n}(h.a.Component),K=Object(q.c)(f.f,Object(y.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{getLogoutUser:W}))(J),Y=n(24),Z=(n(48),n(37),function(e){return Object(p.jsx)(Y.b,{onSubmit:function(t){return e.getLoginUser(t.email,t.password,t.rememberMe)},validate:function(e){var t={};return e.email||(t.email="Required"),e.password||(t.password="Required"),t},render:function(e){var t=e.submitError,n=e.handleSubmit,r=e.submitting;return Object(p.jsxs)("form",{onSubmit:n,children:[Object(p.jsx)(Y.a,{name:"email",children:function(e){var t=e.input,n=e.meta;return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Username"}),Object(p.jsx)("input",Object(_.a)(Object(_.a)({},t),{},{type:"text",placeholder:"email"})),(n.error||n.submitError)&&n.touched&&Object(p.jsx)("span",{children:n.error||n.submitError})]})}}),Object(p.jsx)(Y.a,{name:"password",children:function(e){var t=e.input,n=e.meta;return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Password"}),Object(p.jsx)("input",Object(_.a)(Object(_.a)({},t),{},{type:"text",placeholder:"Password"})),n.error&&n.touched&&Object(p.jsx)("span",{children:n.error})]})}}),Object(p.jsx)(Y.a,{name:"rememberMe",type:"checkbox",children:function(e){var t=e.input,n=e.meta;return Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"rememberMe"}),Object(p.jsx)("input",Object(_.a)(Object(_.a)({},t),{},{type:"checkbox"})),n.error&&n.touched&&Object(p.jsx)("span",{children:n.error})]})}}),t&&Object(p.jsx)("div",{className:"error",children:t}),Object(p.jsx)("div",{className:"buttons",children:Object(p.jsx)("button",{type:"submit",disabled:r,children:"Log In"})})]})}})}),Q=Object(y.b)((function(e){return{isAuth:e.auth.isAuth}}),{getLoginUser:function(e,t,n){return function(){var r=Object(I.a)(U.a.mark((function r(a){var s;return U.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,M.a.login(e,t,n);case 2:if(0!==(s=r.sent).resultCode){r.next=7;break}a(G()),r.next=9;break;case 7:if(10!==s.resultCode){r.next=9;break}return r.abrupt("return",Object(C.a)({},F.a,s.messages[0]));case 9:return r.abrupt("return",Object(C.a)({},F.a,s.messages[0]));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},getLogoutUser:W})((function(e){return e.isAuth?Object(p.jsx)(f.a,{to:"/profile"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{children:"Login"}),Object(p.jsx)(Z,{getLoginUser:e.getLoginUser})]})})),V="INITIALIZED_SUCCESS",X={initialized:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(_.a)(Object(_.a)({},e),{},{initialized:!0});default:return e}},ee=n(34),te=h.a.lazy((function(){return n.e(3).then(n.bind(null,88))})),ne=h.a.lazy((function(){return n.e(4).then(n.bind(null,87))})),re=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(p.jsx)(h.a.Suspense,{fallback:Object(p.jsx)(ee.a,{}),children:Object(p.jsx)(j.a,{children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)(K,{}),Object(p.jsxs)("div",{className:"wrapper__inner",children:[Object(p.jsx)(b,{}),Object(p.jsxs)("div",{className:d.a.wrapper__content,children:[Object(p.jsx)(f.b,{path:"/profile/:userId?",render:function(){return Object(p.jsx)(te,{})}}),Object(p.jsx)(f.b,{path:"/dialogs",render:function(){return Object(p.jsx)(E,{})}}),Object(p.jsx)(f.b,{path:"/users",render:function(){return Object(p.jsx)(ne,{})}}),Object(p.jsx)(f.b,{path:"/login",render:function(){return Object(p.jsx)(Q,{})}})]})]})]})})})}):Object(p.jsx)(ee.a,{})}}]),n}(h.a.Component),ae=Object(y.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(G()).then((function(){e({type:V})}))}}})(re),se=n(49),ce=n(51),ie=Object(q.b)({profilePage:D.b,dialogsPage:x,usersPage:se.a,auth:H,app:$}),ue=Object(q.d)(ie,Object(q.a)(ce.a));window.store=ue;var oe=ue;s.a.render(Object(p.jsx)(y.a,{store:oe,children:Object(p.jsx)(ae,{})}),document.getElementById("root")),r()}},[[82,1,2]]]);
//# sourceMappingURL=main.5d2e7a0c.chunk.js.map